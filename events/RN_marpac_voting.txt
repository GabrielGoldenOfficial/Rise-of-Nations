add_namespace = marpac

country_event = {        #######Resolution 51: Operation Juin
	id = marpac.1
	title = marpac.1.t
	desc = marpac.1.d
	picture = GFX_FRA_may_pustch
	is_triggered_only = yes
    immediate = {
	set_variable = { global.marpac_for_vote = 0 }
	set_variable = { global.marpac_against_vote = 0 }		
	clear_array = global.marpac_executive_array
		every_country = {
		limit = { 
		OR = {
		has_idea = superstate_size7
		has_idea = superstate_size6
		has_idea = superstate_size5
		AND = {
			NOT = {
				has_idea = foreign_isolationism
				has_idea = isolation
			}
			is_major = yes
		}
		has_idea = RON_United_Nations_Security_Council_NP
		has_idea = RON_United_Nations_Security_Council		
		}
		}
		add_to_array = {
    	array = global.marpac_executive_array
    	value = THIS.id
		}
		}	
	}
	option = {
		name = marpac.1.a
		set_global_flag = MARPAC_voting_in_process
		set_global_flag = MARPAC_resolution_51
        set_country_flag = show_marpac_menu			
		hidden_effect = {
		every_country = {
		limit = { 
		OR = {
		has_idea = superstate_size7
		has_idea = superstate_size6
		has_idea = superstate_size5
		AND = {
			NOT = {
				has_idea = foreign_isolationism
				has_idea = isolation
			}
			is_major = yes
		}
		has_idea = RON_United_Nations_Security_Council_NP
		has_idea = RON_United_Nations_Security_Council		
		}
		}
		if = {
			limit = {
				is_ai = yes
			}
		country_event = { 
		id = marpac.5
		days = 5
		}			
		}
		}	
		
		country_event = {
		id = marpac.2
		days = 15
		}
		}
	}	
}

country_event = {        #######Resolution: hidden check 
	id = marpac.2
	title = marpac.1.t
	desc = marpac.1
	picture = GFX_FRA_may_pustch
    hidden = yes
	is_triggered_only = yes

	option = {
		name = marpac.1.b
		if = {
		limit = {
		check_variable = {
	    var = global.marpac_for_vote
	    value = global.marpac_against_vote
	    compare = greater_than_or_equals
}
	}
	news_event = marpac.3
	FRA = { 
	country_event = {
	id = africa.2
	days = 1
	}
}	
    else = {
	news_event = marpac.4
	}		
	clr_global_flag = MARPAC_resolution_1
	clr_global_flag = MARPAC_resolution_51
	clr_global_flag = MARPAC_resolution_80
	clr_global_flag = MARPAC_resolution_10
	clr_global_flag = MARPAC_voting_in_process	
	clr_country_flag = currently_voting
	clear_array = global.marpac_countries_against
	clear_array = global.marpac_countries_for

	}	
}
}
news_event = {        #######Resolution  passed
	id = marpac.3
	title = marpac.3.t
	desc = marpac.3.d
	picture = GFX_germany_occupation_ends
    major = yes
	is_triggered_only = yes

	option = {
		name = marpac.3.d	
	    clr_country_flag = show_marpac_menu
		clr_country_flag = show_faction_power_menu		
		clr_country_flag = MARPAC_voted	
		clear_array = global.marpac_countries_against
		clear_array = global.marpac_countries_for
	}	
}

news_event = {        #######Resolution  not passed
	id = marpac.4
	title = marpac.4.t
	desc = marpac.4.d
	picture = GFX_germany_occupation_ends
    major = yes
	is_triggered_only = yes

	option = {
		name = marpacnews
		add_political_power = 5
		clr_country_flag = show_marpac_menu
		clr_country_flag = show_faction_power_menu
		clr_country_flag = MARPAC_voted		
		clear_array = global.marpac_countries_against
		clear_array = global.marpac_countries_for
	}	
}

#######AI voting
country_event = {        
	id = marpac.5
	title = marpacnews.t
	desc = marpac.5.d
	picture = GFX_FRA_may_pustch
	is_triggered_only = yes
	option = {
		name = marpac.5.a	
		trigger = {
					NOT = {
	has_country_flag = MARPAC_voted 
					}			
			OR = {
	OR = { # Resolution 1
			has_global_flag = MARPAC_resolution_1
			OR = {
			has_war = no
			has_war_with = BOX
			has_government = neutrality			
			has_war_support > .6	
			 controls_state = 729
			 controls_state = 728
			 controls_state = 326
			is_on_continent = asia
			 controls_state = 1028
			 controls_state = 745
			 controls_state = 743
			 controls_state = 902
			}
			NOT = {
				has_idea = isolation
				has_idea = foreign_isolationism
			}			
			}
			OR = { # Resolution 10
			has_global_flag = MARPAC_resolution_10
			OR = {
				casualties > 2000000
				has_capitulated = yes
				AND = {
					has_stability < .5
					has_government = democratic
				}
				has_war_support < .5
			}
						
			}
			OR = { # Resolution 80
			has_global_flag = MARPAC_resolution_80
			NOT = {
			OR = {
				has_idea = isolation
				has_idea = foreign_isolationism
				has_government = communism	
				has_idea = superstate_size3
				has_idea = superstate_size2
				has_idea = superstate_size1			
			}
			}
			}

			}
		
		}		
		if = { 
			limit = { 
				has_global_flag = MARPAC_resolution_1
			}
			FRA = {
				add_to_faction = ROOT
			}
		}
		if = { 
			limit = { 
				has_global_flag = MARPAC_resolution_80
			}
			ROOT = {
				set_country_flag = anti_korea
			}
		}		
			set_country_flag = MARPAC_voted	 
		    add_to_array = {
	        array = global.marpac_countries_for
            value = THIS.id
		}		
			add_to_variable = {
	        var = global.marpac_for_vote
	        value = 1
        }	
	}	
	option = {
		name = marpac.5.b			

			set_country_flag = MARPAC_voted	
			trigger = {
									NOT = {
	has_country_flag = MARPAC_voted 
					}
			}
			add_to_variable = {
	        var = global.marpac_against_vote
	        value = 1
			}
		    add_to_array = {
	        array = global.marpac_countries_against
            value = THIS.id
		}				
	}	
	option = {
		name = marpac.5.c # simulate deciding on a vote
		country_event = {
		id = marpac.5
		days = 4
		}
		trigger = {
					NOT = {
	has_country_flag = MARPAC_voted 
					}			
		}
	}
	option = {
		name = marpac.5.d
		trigger = {
			OR = {
				has_idea = foreign_neutral
			}
		}
	}
}

country_event = {        #######Resolution 51: hidden check 
	id = marpac.52
	title = marpac.1.t
	desc = marpac.1
	picture = GFX_FRA_may_pustch
    hidden = yes
	is_triggered_only = yes

	option = {
		name = marpac.1.b	
		RN_faction_power_calculation = yes	
}
}
country_event = {        #######Resolution 10: Great war peace
	id = marpac.8
	title = marpac.8.t
	desc = marpac.8.d
	picture = GFX_FRA_may_pustch
	is_triggered_only = yes
    immediate = {
	set_variable = { global.marpac_for_vote = 0 }
	set_variable = { global.marpac_against_vote = 0 }		
	clear_array = global.marpac_executive_array
	hidden_effect = {
		every_country = {
		limit = { 
			OR = {
			has_war_with = GER
			tag = GER				
			}
			NOT = {
				tag = REB
			}		
			}
			set_country_flag = currently_voting
		add_to_array = {
    	array = global.marpac_executive_array
    	value = THIS.id
		}
				
	}
}	
	}
	option = {
		name = marpac.8.a
		set_global_flag = MARPAC_voting_in_process
		set_global_flag = MARPAC_resolution_10
        set_country_flag = show_marpac_menu			
		hidden_effect = {
		every_country = {
		limit = { 
			OR = {
			has_war_with = GER
			tag = GER				
			}
			NOT = {
				tag = REB
			}
		}
		if = {
			limit = {
				is_ai = yes
			}
		country_event = { 
		id = marpac.5
		days = 5
		}			
		}
		
		}	
		
		country_event = {
		id = marpac.2
		days = 15
		}
		}
	}	
}
country_event = {        #######Resolution 1: Boxer War Rebellion
	id = marpac.9
	title = marpac.8.t
	desc = marpac.8.d
	picture = GFX_FRA_may_pustch
	is_triggered_only = yes
    immediate = {
	set_variable = { global.marpac_for_vote = 0 }
	set_variable = { global.marpac_against_vote = 0 }		
	clear_array = global.marpac_executive_array
	hidden_effect = {
	every_country = {
		limit = { 
			OR = {
			tag = AUH
			tag = ENG
			tag = FRA
			tag = GER
			tag = ITA
			tag = JAP
			is_major = yes
			tag = RUS					
			}				
			}
		add_to_array = {
    	array = global.marpac_executive_array
    	value = THIS.id
		}
		}			
	}
	
	}
	option = {
		name = marpac.8.a
		set_global_flag = MARPAC_voting_in_process
		set_global_flag = MARPAC_resolution_1
        set_country_flag = show_marpac_menu			
		hidden_effect = {
		every_country = {
		limit = { 
			OR = {
			tag = AUH
			tag = ENG
			tag = FRA
			tag = GER
			tag = ITA
			tag = JAP
			tag = RUS		
			is_major = yes			
			}		
			NOT = {
				tag = QIN
				tag = CHI
			}
		}
		if = {
			limit = {
				is_ai = yes
			}
		country_event = { 
		id = marpac.5
		days = 5
		}			
		}
		
		}	
		
		country_event = {
		id = marpac.2
		days = 15
		}
		}
	}	
}

country_event = {        #######Resolution 10: End Great War
	id = marpac.7
	title = marpac.2.t
	desc = marpac.2.d
	picture = GFX_FRA_may_pustch
	is_triggered_only = yes
    immediate = {
	set_variable = { global.marpac_for_vote = 0 }
	set_variable = { global.marpac_against_vote = 0 }		
	clear_array = global.marpac_executive_array
		every_country = {
		limit = { 
			OR = {
			has_war_with = GER
			tag = GER				
			}		}
		add_to_array = {
    	array = global.marpac_executive_array
    	value = THIS.id
		}
		}	
	}
	option = {
		name = marpac.2.a
		set_global_flag = MARPAC_voting_in_process
		set_global_flag = MARPAC_resolution_10
        set_country_flag = show_marpac_menu			
		hidden_effect = {
		every_country = {
		limit = { 
			OR = {
			has_war_with = GER
			tag = GER				
			}

		}
		if = {
			limit = {
				is_ai = yes
			}
		country_event = { 
		id = marpac.5
		days = 5
		}			
		}
		
		}	
		
		country_event = {
		id = marpac.2
		days = 15
		}
		}
	}	
}

country_event = {        #######Resolution 80: Korean War
	id = marpac.80
	title = marpac.80.t
	desc = marpac.80.d
	picture = GFX_FRA_may_pustch
	is_triggered_only = yes
	hidden = yes
    immediate = {
	set_variable = { global.marpac_for_vote = 0 }
	set_variable = { global.marpac_against_vote = 0 }		
	clear_array = global.marpac_executive_array
		every_country = {
		limit = { 
			AND = {
			has_idea = RON_United_Nations
			OR = {
			not = {
				tag = UNA
				tag = DPK
				tag = XXB
				tag = KOR
				tag = ZOM
				tag = EUR
				tag = LON
			}					
			}				
			}

		
		}
		add_to_array = {
    	array = global.marpac_executive_array 
    	value = THIS.id
		}
		}	
	}
	option = {
		name = marpac.2.a
		set_global_flag = MARPAC_voting_in_process
		set_global_flag = MARPAC_resolution_80
        set_country_flag = show_marpac_menu			
		hidden_effect = {
			USA = {
			set_country_flag = MARPAC_voted	 
		    add_to_array = {
	        array = global.marpac_countries_for
            value = THIS.id
		}		
			add_to_variable = {
	        var = global.marpac_for_vote
	        value = 1
        }			
			}
		every_country = {
		limit = { 
			AND = {
			has_idea = RON_United_Nations
			OR = {
			NOT = {
				tag = UNA
				tag = DPK
				tag = KOR
				tag = XXB
				tag = ZOM
				tag = EUR
				tag = LON
			}					
			}				
			}		
		}
		if = {
			limit = {
				is_ai = yes
			}
		country_event = { 
		id = marpac.5
		days = 5
		}			
		}
		set_country_flag = currently_voting
		}	
		
		country_event = {
		id = marpac.2
		days = 15
		}
		}
	}	
}