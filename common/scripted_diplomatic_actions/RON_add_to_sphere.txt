 scripted_diplomatic_actions = {
 	RON_add_to_sphere = {
 		visible = {
            always = yes
 		}
 		selectable = {
 		ROOT = {
            OR = {
                tag = RUS
                tag = USA
                tag = ENG
                tag = GER
                tag = JAP
				tag = SOV
                tag = RUS
                tag = ITA
                tag = OTT
                tag = FRA
                tag = SPR
                tag = SPA
                tag = AUH
                tag = CHI
                }
            }								
                        country_exists = ROOT
                        ROOT = { is_subject = no}
 FROM = {            
                            has_opinion = {
                                target = ROOT
                                value > -1
                            }                                 
                                OR = {
                                    is_puppet_of = ROOT
                                    is_subject_of = ROOT
                            has_idea = superstate_size1
                            has_idea = superstate_size2                                                   
							is_neighbor_of = ROOT
                                }
                            }
                       
	 		
        }
 		requires_acceptance = yes
 		show_acceptance_on_action_button = yes
        
 		cost = 100

 		complete_effect = {
if = {
    limit = {
        ROOT = {
            tag = USA
        }
    }
    FROM = {
        set_country_flag = USA_influnced
        clr_country_flag = RUS_influnced
        clr_country_flag = ENG_influnced
        clr_country_flag = GER_influnced
        clr_country_flag = JAP_influnced
        clr_country_flag = SOV_influnced
        clr_country_flag = ITA_influnced
        clr_country_flag = OTT_influnced
        clr_country_flag = FRA_influnced
        clr_country_flag = SPR_influnced
        clr_country_flag = SPA_influnced
        clr_country_flag = AUH_influnced
        clr_country_flag = CHI_influnced
    }
}

if = {
    limit = {
        ROOT = {
            tag = RUS
        }
    }
    FROM = {
        set_country_flag = RUS_influnced
        clr_country_flag = USA_influnced
        clr_country_flag = ENG_influnced
        clr_country_flag = GER_influnced
        clr_country_flag = JAP_influnced
        clr_country_flag = SOV_influnced
        clr_country_flag = ITA_influnced
        clr_country_flag = OTT_influnced
        clr_country_flag = FRA_influnced
        clr_country_flag = SPR_influnced
        clr_country_flag = SPA_influnced
        clr_country_flag = AUH_influnced
        clr_country_flag = CHI_influnced
    }
}

if = {
    limit = {
        ROOT = {
            tag = ENG
        }
    }
    FROM = {
        set_country_flag = ENG_influnced
        clr_country_flag = USA_influnced
        clr_country_flag = RUS_influnced
        clr_country_flag = GER_influnced
        clr_country_flag = JAP_influnced
        clr_country_flag = SOV_influnced
        clr_country_flag = ITA_influnced
        clr_country_flag = OTT_influnced
        clr_country_flag = FRA_influnced
        clr_country_flag = SPR_influnced
        clr_country_flag = SPA_influnced
        clr_country_flag = AUH_influnced
        clr_country_flag = CHI_influnced
    }
}

if = {
    limit = {
        ROOT = {
            tag = GER
        }
    }
    FROM = {
        set_country_flag = GER_influnced
        clr_country_flag = USA_influnced
        clr_country_flag = RUS_influnced
        clr_country_flag = ENG_influnced
        clr_country_flag = JAP_influnced
        clr_country_flag = SOV_influnced
        clr_country_flag = ITA_influnced
        clr_country_flag = OTT_influnced
        clr_country_flag = FRA_influnced
        clr_country_flag = SPR_influnced
        clr_country_flag = SPA_influnced
        clr_country_flag = AUH_influnced
        clr_country_flag = CHI_influnced
    }
}

if = {
    limit = {
        ROOT = {
            tag = JAP
        }
    }
    FROM = {
        set_country_flag = JAP_influnced
        clr_country_flag = USA_influnced
        clr_country_flag = RUS_influnced
        clr_country_flag = ENG_influnced
        clr_country_flag = GER_influnced
        clr_country_flag = SOV_influnced
        clr_country_flag = ITA_influnced
        clr_country_flag = OTT_influnced
        clr_country_flag = FRA_influnced
        clr_country_flag = SPR_influnced
        clr_country_flag = SPA_influnced
        clr_country_flag = AUH_influnced
        clr_country_flag = CHI_influnced
    }
}

if = {
    limit = {
        ROOT = {
            tag = SOV
        }
    }
    FROM = {
        set_country_flag = SOV_influnced
        clr_country_flag = USA_influnced
        clr_country_flag = RUS_influnced
        clr_country_flag = ENG_influnced
        clr_country_flag = GER_influnced
        clr_country_flag = JAP_influnced
        clr_country_flag = ITA_influnced
        clr_country_flag = OTT_influnced
        clr_country_flag = FRA_influnced
        clr_country_flag = SPR_influnced
        clr_country_flag = SPA_influnced
        clr_country_flag = AUH_influnced
        clr_country_flag = CHI_influnced
    }
}

if = {
    limit = {
        ROOT = {
            tag = ITA
        }
    }
    FROM = {
        set_country_flag = ITA_influnced
        clr_country_flag = USA_influnced
        clr_country_flag = RUS_influnced
        clr_country_flag = ENG_influnced
        clr_country_flag = GER_influnced
        clr_country_flag = JAP_influnced
        clr_country_flag = SOV_influnced
        clr_country_flag = OTT_influnced
        clr_country_flag = FRA_influnced
        clr_country_flag = SPR_influnced
        clr_country_flag = SPA_influnced
        clr_country_flag = AUH_influnced
        clr_country_flag = CHI_influnced
    }
}

if = {
    limit = {
        ROOT = {
            tag = OTT
        }
    }
    FROM = {
        set_country_flag = OTT_influnced
        clr_country_flag = USA_influnced
        clr_country_flag = RUS_influnced
        clr_country_flag = ENG_influnced
        clr_country_flag = GER_influnced
        clr_country_flag = JAP_influnced
        clr_country_flag = SOV_influnced
        clr_country_flag = ITA_influnced
        clr_country_flag = FRA_influnced
        clr_country_flag = SPR_influnced
        clr_country_flag = SPA_influnced
        clr_country_flag = AUH_influnced
        clr_country_flag = CHI_influnced
    }
}

if = {
    limit = {
        ROOT = {
            tag = FRA
        }
    }
    FROM = {
        set_country_flag = FRA_influnced
        clr_country_flag = USA_influnced
        clr_country_flag = RUS_influnced
        clr_country_flag = ENG_influnced
        clr_country_flag = GER_influnced
        clr_country_flag = JAP_influnced
        clr_country_flag = SOV_influnced
        clr_country_flag = ITA_influnced
        clr_country_flag = OTT_influnced
        clr_country_flag = SPR_influnced
        clr_country_flag = SPA_influnced
        clr_country_flag = AUH_influnced
        clr_country_flag = CHI_influnced
    }
}

if = {
    limit = {
        ROOT = {
            tag = SPR
        }
    }
    FROM = {
        set_country_flag = SPR_influnced
        clr_country_flag = USA_influnced
        clr_country_flag = RUS_influnced
        clr_country_flag = ENG_influnced
        clr_country_flag = GER_influnced
        clr_country_flag = JAP_influnced
        clr_country_flag = SOV_influnced
        clr_country_flag = ITA_influnced
        clr_country_flag = OTT_influnced
        clr_country_flag = FRA_influnced
        clr_country_flag = SPA_influnced
        clr_country_flag = AUH_influnced
        clr_country_flag = CHI_influnced
    }
}

if = {
    limit = {
        ROOT = {
            tag = SPA
        }
    }
    FROM = {
        set_country_flag = SPA_influnced
        clr_country_flag = USA_influnced
        clr_country_flag = RUS_influnced
        clr_country_flag = ENG_influnced
        clr_country_flag = GER_influnced
        clr_country_flag = JAP_influnced
        clr_country_flag = SOV_influnced
        clr_country_flag = ITA_influnced
        clr_country_flag = OTT_influnced
        clr_country_flag = FRA_influnced
        clr_country_flag = SPR_influnced
        clr_country_flag = AUH_influnced
        clr_country_flag = CHI_influnced
    }
}

if = {
    limit = {
        ROOT = {
            tag = AUH
        }
    }
    FROM = {
        set_country_flag = AUH_influnced
        clr_country_flag = USA_influnced
        clr_country_flag = RUS_influnced
        clr_country_flag = ENG_influnced
        clr_country_flag = GER_influnced
        clr_country_flag = JAP_influnced
        clr_country_flag = SOV_influnced
        clr_country_flag = ITA_influnced
        clr_country_flag = OTT_influnced
        clr_country_flag = FRA_influnced
        clr_country_flag = SPR_influnced
        clr_country_flag = SPA_influnced
        clr_country_flag = CHI_influnced
    }
}

if = {
    limit = {
        ROOT = {
            tag = CHI
        }
    }
    FROM = {
        set_country_flag = CHI_influnced
        clr_country_flag = USA_influnced
        clr_country_flag = RUS_influnced
        clr_country_flag = ENG_influnced
        clr_country_flag = GER_influnced
        clr_country_flag = JAP_influnced
        clr_country_flag = SOV_influnced
        clr_country_flag = ITA_influnced
        clr_country_flag = OTT_influnced
        clr_country_flag = FRA_influnced
        clr_country_flag = SPR_influnced
        clr_country_flag = SPA_influnced
        clr_country_flag = AUH_influnced
    }
}
			
       
 		}
 		reject_effect = {
 			log = "[ROOT.GetName] proposed [THIS.GetName] join their sphere but it was refused"
 		}
 		send_description = PROPOSE_PEACE_SEND_DESC
 		receive_description = PROPOSE_PEACE_RECEIVE_DESC
 		accept_title = PROPOSE_PEACE_ACCEPT_TITLE
 		accept_description = PROPOSE_PEACE_ACCEPT_DESC
 		reject_title = PROPOSE_PEACE_REJECT_TITLE
 		reject_description = PROPOSE_PEACE_REJECT_DESC
 		#AI 
 		ai_acceptance = {
 			base_desire = {
 				base = 5
 				modifier = {
 					add = -15
 				}
 			}
            share_ideology = {
                base = 0
                modifier = {
                    add = 60
                    FROM = {
                    has_ideology_group = ROOT
                    }
                }
            }
            puppet = {
                base = 0
                modifier = {
                    add = 1000000
                    is_puppet_of = ROOT
                    is_subject_of = ROOT
                }
            }
            economic_block_member = {
                base = 0
                modifier = {
                    add = 30
                    OR = {
                            AND = {
                                OR = {
                                tag = SOV
                                has_country_flag = comeconmember 
                                }
                            }
                    }

                }
            }        
            is_friend ={
                base = 0 
                modifier = {
                            AND = {   							
                            has_opinion = {
                                target = ROOT
                                value > 80
                            }    
                            OR = {
                            is_in_faction = no
                            is_in_faction_with = ROOT
                            }
                            }                    
                }       
            }    
 			major_nation = {
 				base = 0
 				modifier = {
 					add = -50
 					ROOT = {
                        is_major = no
 					}
 				}
 			}
            faction = {
                base = 0
                modifier = {
                    add = 10
                            OR = {
                            is_in_faction_with = ROOT
                            }                    
                }
            }
 			has_strong_allies = {
 				base = 0
 				modifier = {
 					add = -50
 					THIS = {
 						is_faction_leader = yes
 						any_allied_country = {
 							strength_ratio = {
 								tag = ROOT
 								ratio > 0.8
 							}
 						}
 					}
 				}
 			}
			is_sphere_owner = {
				base = 0
				modifier = {
					add = -10000
					FROM = {
						OR = {
                tag = RUS
                tag = USA
                tag = ENG
                tag = GER
                tag = JAP
                tag = RUS
				tag = SOV
                tag = ITA
                tag = OTT
                tag = FRA
                tag = SPR
                tag = SPA
                tag = AUH
                tag = CHI
						}
					}
				}
			}
			is_part_of_sphere = {
				base = 0
				modifier = {
					add = -40
					OR = {
					FROM = {
                        OR = {
                            has_country_flag = USA_influnced
                            has_country_flag = RUS_influnced
                            has_country_flag = ENG_influnced
                            has_country_flag = GER_influnced
                            has_country_flag = JAP_influnced
                            has_country_flag = SOV_influnced
                            has_country_flag = ITA_influnced
                            has_country_flag = OTT_influnced
                            has_country_flag = FRA_influnced
                            has_country_flag = SPR_influnced
                            has_country_flag = SPA_influnced
                            has_country_flag = AUH_influnced
                            has_country_flag = CHI_influnced
                        }
					}
					}
				}
			}			
        }
 		ai_desire = {			
 			base = 100	
 			major_nation = {
 				base = 0
 				modifier = {
 					add = -50
 					ROOT = {
                     NOT = {
                        OR = {
                tag = RUS
                tag = USA
                tag = ENG
                tag = GER
                tag = JAP
                tag = RUS
				tag = SOV
                tag = ITA
                tag = OTT
                tag = FRA
                tag = SPR
                tag = SPA
                tag = AUH
                tag = CHI                            
                        }
                        }
 					}
 				}
 			}
        
			is_part_of_sphere = {
				base = 0
				modifier = {
					add = -10
                    OR = {
                        FROM = {
					has_country_flag = USA_influnced
                    has_country_flag = RUS_influnced
                    has_country_flag = ENG_influnced
                    has_country_flag = GER_influnced
                    has_country_flag = JAP_influnced
                    has_country_flag = SOV_influnced
                    has_country_flag = ITA_influnced
                    has_country_flag = OTT_influnced
                    has_country_flag = FRA_influnced
                    has_country_flag = SPR_influnced
                    has_country_flag = SPA_influnced
                    has_country_flag = AUH_influnced
                    has_country_flag = CHI_influnced
                        }
                    }
				}
			}
            is_a_puppet = {
                base = 0
                modifier = {
                    add = 1000000
                    OR = {
                    is_puppet_of = ROOT
                    is_subject_of = ROOT
                    }
                }
            }
            economic_block_member = {
                base = 0
                modifier = {
                    add = 30
                    OR = {
                            AND = {
                                OR = {
                                tag = SOV
                                has_country_flag = comeconmember 
                                }
                            }
                    }
                }
            }
 			base_desire = {
 				base = 5
 				modifier = {
 					add = -15
 				}
 			}
            share_ideology = {
                base = 0
                modifier = {
                    add = 60
                    FROM = {
                    has_ideology_group = ROOT
                    }
                }
            }                    
             weak = {
                base = 0
                modifier = {
                    add = 300
                    OR = {
                        has_idea = superstate_size1
                        has_idea = superstate_size2
                    }
                }
            }         
             close = {
                base = 0
                modifier = {
                    add = 300
                    OR = {
							is_neighbor_of = ROOT
                    }

                }
            }       
             puppet = {
                base = 0
                modifier = {
                    add = 300
                    OR = {
							is_puppet_of = ROOT
                            is_subject_of = ROOT
                    }

                }
            }                                       
 			has_strong_allies = {
 				base = 0
 				modifier = {
 					add = -50
 					THIS = {
						NOT = {
							is_puppet_of = ROOT
						}
 						is_faction_leader = yes
 						any_allied_country = {
 							strength_ratio = {
 								tag = ROOT
 								ratio > 0.8
 							}
 						}
 					}
 				}
 			} 		
 		}
 	}
 }